<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="reports.js"></script>

<h1 id="report">Report 1</h1>

    <div class="report-chart">
    	<div id="histogram" class="chart"></div>
    	<div id="slider"></div>
	    <div id="scatter_plot" class="chart"></div>
    </div>

    <div id="report-table">
    </div>

	<script>
	    jsonfile = location.hash.substring(1);
		$.get(jsonfile, function(json) {
			var report_chart = new ReportChart(json);

			report_chart.buildTable("report-table");

			if (json.is_binned) {
				report_chart.histogram("histogram", null);
				$("#scatter_plot").hide();
			}
			else {
				report_chart.histogram("histogram", Math.sqrt(json.data.length, 1/3));
				report_chart.scatterPlot("scatter_plot");
				$("#slider").slider({
					value: Math.sqrt(json.data.length, 1/3),
					slide: function(event, ui) {
						report_chart.histogram("histogram", ui.value);
					}					
				});
			}
		});
		
		$(window).on('hashchange', function() {
			location.reload(true);
		});

		$("#report").html(parent.report_title);
	</script>

